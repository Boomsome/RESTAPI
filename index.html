<!-- TCSS 460 : Summer 2020 -->
<!-- Module 3 Example: Connecting to Github API -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exercise3</title>
    <!-- add a reference to the external stylesheet -->
    <link rel="shortcut icon" href="#">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">


    <!-- you can try other themes -->
    <!--link rel="stylesheet" href="https://bootswatch.com/4/spacelab/bootstrap.min.css" -->
    <!--link rel="stylesheet" href="https://bootswatch.com/4/solar/bootstrap.min.css" -->
    <!--link rel="stylesheet" href="https://bootswatch.com/4/united/bootstrap.min.css" -->

    <!-- add reference to jQuery -->
    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
</head>

<body>
    <!--Banner at the top-->
    <nav class="navbar navbar-dark bg-primary mb-3">
        <div class="container">
            <a href="#" class="navbar-brand">REST API</a>
        </div>
    </nav>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button"
                role="tab" aria-selected="false">Home</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="first-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button"
                role="tab" aria-selected="false">Fahrenheit Converter</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="second-tab" data-bs-toggle="tab" data-bs-target="#messages" type="button"
                role="tab" aria-selected="false">Wind Chill Calculator</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="third-tab" data-bs-toggle="tab" data-bs-target="#idk" type="button"
                role="tab" aria-selected="false">Relative Humidity Calculator</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="fourth-tab" data-bs-toggle="tab" data-bs-target="#yea" type="button"
                role="tab" aria-selected="false">Heat Index</button>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="home" role="tabpanel" aria-labelledby="home-tab"
            style="font-size: 60px; text-align:center;">
            Temperature Calculator API Fahrenheit Edition v1.0.0
        </div>
        <div class="tab-pane" id="first" role="tabpanel" aria-labelledby="first-tab">
            <p>Enter degrees Celcius to get Fahrenheit:</p>
            <input type="text" id="degree">
            <div id="fDiv">
                <!--To be filled by the fetch-->
            </div>
        </div>
        <div class="tab-pane" id="second" role="tabpanel" aria-labelledby="second-tab">
            <p>Enter a Degree (F) in the first box and a Speed (mph) in the second:</p>
            <input type="text" id="degree2">
            <input type="text" id="speed">
            <div id="windChillDiv">
                <!--To be filled by the fetch-->
            </div>
        </div>
        <div class="tab-pane" id="third" role="tabpanel" aria-labelledby="second-tab">
            <p>Enter in the water vapor pressure and air water content in degrees Fahrenheit:</p>
            <input type="text" id="wvap">
            <input type="text" id="airwat">
            <div id="humidityDiv">
                <!--To be filled by the fetch-->
            </div>
        </div>
        <div class="tab-pane" id="fourth" role="tabpanel" aria-labelledby="second-tab">
            <p>Enter in the Fahrenheit temperature in degrees Fahrenheit:</p>
            <input type="text" id="degree3">
            <div id="cDiv">
                <!--To be filled by the fetch-->
            </div>
        </div>
    </div>

    <script>
        // this is changing which tab is highlighted on the screen along with which panel is displayed
        // this shows the home tab
        document.getElementById("home-tab").addEventListener("click", function () {
            //alert("you clicked");
            document.getElementById("home-tab").className = 'nav-link active';
            document.getElementById("first-tab").className = 'nav-link';
            document.getElementById("second-tab").className = 'nav-link';
            document.getElementById("third-tab").className = 'nav-link';
            document.getElementById("fourth-tab").className = 'nav-link';
            // sets the pane
            document.getElementById("home").className = 'tab-pane active';
            document.getElementById("first").className = 'tab-pane';
            document.getElementById("second").className = 'tab-pane';
            document.getElementById("third").className = 'tab-pane';
            document.getElementById("fourth").className = 'tab-pane';
            
        })
        // this shows the firs tab which is the Cat photos API
        document.getElementById("first-tab").addEventListener("click", function () {
            // sets the first link
            document.getElementById("home-tab").className = 'nav-link';
            document.getElementById("first-tab").className = 'nav-link active';
            document.getElementById("second-tab").className = 'nav-link';
            document.getElementById("third-tab").className = 'nav-link';
            document.getElementById("fourth-tab").className = 'nav-link';
            // sets the pane to be active showing the first pane
            document.getElementById("home").className = 'tab-pane';
            document.getElementById("first").className = 'tab-pane active';
            document.getElementById("second").className = 'tab-pane';
            document.getElementById("third").className = 'tab-pane';
            document.getElementById("fourth").className = 'tab-pane';
        })

        document.getElementById("second-tab").addEventListener("click", function () {
            // sets the second link
            document.getElementById("home-tab").className = 'nav-link';
            document.getElementById("first-tab").className = 'nav-link';
            document.getElementById("second-tab").className = 'nav-link active';
            document.getElementById("third-tab").className = 'nav-link';
            document.getElementById("fourth-tab").className = 'nav-link';
            // sets the pane to be active showing the second pane
            document.getElementById("home").className = 'tab-pane';
            document.getElementById("first").className = 'tab-pane';
            document.getElementById("second").className = 'tab-pane active';
            document.getElementById("third").className = 'tab-pane';
            document.getElementById("fourth").className = 'tab-pane';
        })

        document.getElementById("third-tab").addEventListener("click", function () {
            // sets the third link
            document.getElementById("home-tab").className = 'nav-link';
            document.getElementById("first-tab").className = 'nav-link';
            document.getElementById("second-tab").className = 'nav-link';
            document.getElementById("third-tab").className = 'nav-link active';
            document.getElementById("fourth-tab").className = 'nav-link';
            // sets the pane to be active showing the second pane
            document.getElementById("home").className = 'tab-pane';
            document.getElementById("first").className = 'tab-pane';
            document.getElementById("second").className = 'tab-pane';
            document.getElementById("third").className = 'tab-pane active';
            document.getElementById("fourth").className = 'tab-pane';
        })

        document.getElementById("fourth-tab").addEventListener("click", function () {
            // sets the fourth link
            document.getElementById("home-tab").className = 'nav-link';
            document.getElementById("first-tab").className = 'nav-link';
            document.getElementById("second-tab").className = 'nav-link';
            document.getElementById("third-tab").className = 'nav-link';
            document.getElementById("fourth-tab").className = 'nav-link active';
            // sets the pane to be active showing the second pane
            document.getElementById("home").className = 'tab-pane';
            document.getElementById("first").className = 'tab-pane';
            document.getElementById("second").className = 'tab-pane';
            document.getElementById("third").className = 'tab-pane';
            document.getElementById("fourth").className = 'tab-pane active';
        })

    </script>

    <script>
        // adds the action listener for the degree id, then fetches my API based off given degree
        document.getElementById("degree").addEventListener("keyup", function () {
            var jsonData;
            var degrees = document.getElementById("degree").value;
            // fetches the name entered
            //alert(degrees);
            fetch(`http://localhost:3000/FConvert/${degrees}`)
                // gets user response
                .then(response => response)
                // displays the response
                .then(jsonData => document.getElementById("fDiv").innerHTML =
                    `<div>
                <p>The Fahrenheit conversion is: ${JSON.parse(jsonData).result}</p>
            </div>`)
        })

        // adds the action listener for the degree2 id, then catches actionlistener for the speed
        // and then once both of these are aquired the fetch statement is then made with the two
        // saved values
        var temp;
        document.getElementById("degree2").addEventListener("keyup", function () {
            var jsonData;
            temp = document.getElementById("degree2").value;
        })
        document.getElementById("speed").addEventListener("keyup", function () {
            var jsonData;
            // fetches the name entered
            var speed = document.getElementById("speed").value;
            //alert(degrees);
            fetch(`http://localhost:3000/WChill/${temp}/${speed}`)
                // gets user response
                .then(response => response.json())
                // displays the response
                .then(jsonData => document.getElementById("windChillDiv").innerHTML =
                    `<div>
                <p>The Wind Chill result is: ${JSON.parse(jsonData).result}</p>
            </div>`)
        })

        // same strategy as above for the two inputs below
        var wvap;
        document.getElementById("wvap").addEventListener("keyup", function () {
            var jsonData;
            wvap = document.getElementById("wvap").value;
        })
        document.getElementById("airwat").addEventListener("keyup", function () {
            var jsonData;
            // fetches the name entered
            var airwat = document.getElementById("airwat").value;
            //alert(degrees);
            fetch(`http://localhost:3000/RHum/${temp}/${speed}`)
                // gets user response
                .then(response => response.json())
                // displays the response
                .then(jsonData => document.getElementById("windChillDiv").innerHTML =
                    `<div>
                <p>The Relative Humidity result is: ${JSON.parse(jsonData).result}</p>
            </div>`)
        })

        // simpler then above, implemented the same way as the fahrenheit convertor
        document.getElementById("degree3").addEventListener("keyup", function () {
            var jsonData;
            var degrees = document.getElementById("degree3").value;
            // fetches the name entered
            //alert(degrees);
            fetch(`http://localhost:3000/Cconvert/${degrees}`)
                // gets user response
                .then(response => response.json())
                // displays the response
                .then(jsonData => document.getElementById("cDiv").innerHTML =
                    `<div>
                <p>The Celcius conversion is: ${JSON.parse(jsonData).result}</p>
            </div>`)
        })
    </script>
</body>
</html>